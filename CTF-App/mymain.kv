#:kivy 2.0.0
#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import CardTransition kivy.uix.screenmanager.CardTransition
#:import WipeTransition kivy.uix.screenmanager.WipeTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import SwapTransition kivy.uix.screenmanager.SwapTransition
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import FallOutTransition kivy.uix.screenmanager.FallOutTransition
#:import RiseInTransition kivy.uix.screenmanager.RiseInTransition
#:import hex kivy.utils.get_color_from_hex


WindowManager:
    transition: NoTransition()
    Home:
    # Setting:
    Info:
    GameMode:
    Quiz:
    RapidFire:
    Facts:
    QuizResult:
    RapidResult:

<Home>:
    name: "home"

    GridLayout:
        cols: 1
        # size_hint: 1, 1
        size_hint: None, 1
        width: app.windowwidth
        pos_hint: {"center_x": .5, "center_y": .5}
        
        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "images/screens/MainScreen.png"
        
        FloatLayout:
            size: self.size
            pos: self.pos
  
            Label:
                markup: True
                text: '\n'.join(("               [font=fonts/russoone.ttf][b]CTF[/b][/font]","[i][b]Cosmos Trivia[/b][/i]","          [size=80][i]and[/size] [b]Facts[/i][/b]"))
                font_size: "50dp"
                size_hint: 1, .2
                color: hex("#E7005E")
                pos_hint: {"center_x":.5, "top": .95}

            Button:
                markup: True
                text: "[i][font=fonts/righteous.ttf][u]Pla[/u]y[/font][/i]"
                font_size: "60sp"
                color: hex("#5dfc00")
                pos_hint: {"center_x":.5, "center_y": .5}
                size_hint: None, None
                size: 200,100
                # size_hint: None, None
                # size: "175dp","75dp"
                background_color: 0,0,0,0

                on_state:
                    self.opacity = .7 if self.state == "down" else 1
                
                on_release:
                    self.opacity = 1
                    app.root.current = "gamemode"

                # Image:
                #     id: hometoplay
                #     source: "images/buttons/optiondark.png"
                #     center_x: self.parent.center_x
                #     center_y: self.parent.center_y
                #     size: self.parent.size
                #     opacity: 0.5 if self.parent.disabled == True else 1
                    
            
            # Button:
            #     text: "Settings"
            #     pos_hint: {"center_x":.5, "top": .52}
            #     size_hint: None, None
            #     size: "175dp","75dp"
            #     background_color: 0,0,0,0

            #     on_release:
            #         app.root.current = "setting"

            # canvas:
            #     Rectangle:
            #         size_hint: 1, .1
            #         pos_hint: {"center_x":.5, "top":.1}
            #         color: hex("#181818")

            Button:
                id: btnhometoinfo
                pos_hint: {"center_x":.75, "top": .1}
                size_hint: None, (.075)
                width: self.height
                background_color: 0,0,0,0

                on_state:
                    hometoinfo.opacity = .7 if self.state == "down" else 1

                on_release:
                    hometoinfo.opacity = 1
                    app.root.current = "info"

                Image:
                    id: hometoinfo
                    source: "images/buttons/infobutton.png"
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: self.parent.size
                    opacity: 0.5 if self.parent.disabled == True else 1
            
            Button:
                pos_hint: {"center_x":.25, "top": .1}
                size_hint: None, .075
                width: self.height
                background_color: 0,0,0,0

                on_state:
                    hometoexit.opacity = .7 if self.state == "down" else 1

                on_release:
                    hometoexit.opacity = 1
                    app.stop()

                Image:
                    id: hometoexit
                    source: "images/buttons/exitbutton.png"
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: self.parent.size
                    opacity: 0.5 if self.parent.disabled == True else 1

# <Setting>:
#     name: "setting"

#     canvas.before:
#         Rectangle:
#             size: self.size
#             pos: self.pos
#             source: "images/screens/SettingsCTF.png"

#     BoxLayout:
#         orientation: "vertical"
#         size_hint: 1,1
        
#         FloatLayout:
#             size_hint: 1,.8
            
#         FloatLayout:
#             pos_hint: {"right":1, "top":.2}
#             size_hint: None,.2
#             width: self.height

#             Button:
#                 size_hint: None, None
#                 pos_hint: {"center_x":.55, "center_y": .45}
#                 size_hint: None, None
#                 size: "60dp","60dp"
#                 background_color: 0,0,0,0

#                 on_release:
#                     app.root.current = "home"

#                 Image:
#                     id: imagesettingstohome
#                     source: "images/buttons/homebutton.png"
#                     center_x: self.parent.center_x
#                     center_y: self.parent.center_y
#                     size: self.parent.size
#                     opacity: 0.5 if self.parent.disabled == True else 1

<Info>:
    name: "info"

    GridLayout:
        cols: 1
        # size_hint: 1, 1
        size_hint: None, 1
        width: app.windowwidth
        pos_hint: {"center_x": .5, "center_y": .5}
            
        FloatLayout:
            orientation: "vertical"
            # size_hint: 1,1

            TabbedPanel:
                size: self.parent.size
                pos: self.parent.pos
                do_default_tab: False
                tab_width: self.parent.width/3.04
                tab_pos: "top_mid"
                background_image: "images/screens/InfoCTF.png"

                TabbedPanelItem:
                    text: "About"

                    BoxLayout:
                        orientation: "vertical"
                        size_hint: 1,1
                        
                        FloatLayout:
                            size_hint: 1,.8
                            pos_hint: {"top":1}
                            
                            WrappedLabel:
                                size: self.parent.size
                                text: root.aboutctfapp
                                font_size: "25sp"
                                font_name: "fonts/ubuntu.ttf"
                                pos_hint: {"center_x":.5,"top":1}
                                padding_x: 20   
                            
                        FloatLayout:
                            pos_hint: {"right":1, "top":.2}
                            size_hint: None,.2
                            width: self.height

                            Button:
                                size_hint: None, None
                                pos_hint: {"center_x":.55, "center_y": .45}
                                size_hint: None, None
                                size: "60dp","60dp"
                                background_color: 0,0,0,0

                                on_state:
                                    imageinfotohometab1.opacity = .7 if self.state == "down" else 1

                                on_release:
                                    app.root.current = "home"
                                    imageinfotohometab1.opacity = 1
                                    
                                Image:
                                    id: imageinfotohometab1
                                    source: "images/buttons/homebutton.png"
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y
                                    size: self.parent.size
                                    opacity: 0.5 if self.parent.disabled == True else 1

                
                TabbedPanelItem:
                    text: "How To Play?"

                    BoxLayout:
                        orientation: "vertical"
                        size_hint: 1,1
                        
                        FloatLayout:
                            size_hint: 1,.8
                            WrappedLabel:
                                size: self.parent.size
                                text: root.howtoplayctfapp
                                pos_hint: {"center_x":.5,"top":1}
                                padding_x: 20
                                font_size: "30sp"
                                font_name: "fonts/ubuntu.ttf"

                        FloatLayout:
                            pos_hint: {"right":1, "top":.2}
                            size_hint: None,.2
                            width: self.height

                            Button:
                                size_hint: None, None
                                pos_hint: {"center_x":.55, "center_y": .45}
                                size_hint: None, None
                                size: "60dp","60dp"
                                background_color: 0,0,0,0

                                on_state:
                                    imageinfotohometab2.opacity = .7 if self.state == "down" else 1

                                on_release:
                                    app.root.current = "home"
                                    imageinfotohometab2.opacity = 1

                                Image:
                                    id: imageinfotohometab2
                                    source: "images/buttons/homebutton.png"
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y
                                    size: self.parent.size
                                    opacity: 0.5 if self.parent.disabled == True else 1

                        
                
                TabbedPanelItem:
                    text: "Developers"

                    BoxLayout:
                        orientation: "vertical"
                        size_hint: 1,1
                        
                        FloatLayout:
                            size_hint: 1,.8
                            
                            WrappedLabel:
                                size: self.parent.size
                                text: root.infos
                                pos_hint: {"center_x":.5,"top":1}
                                padding_x: 20
                                font_size: "30sp"
                                font_name: "fonts/ubuntu.ttf"

                        FloatLayout:
                            pos_hint: {"right":1, "top":.2}
                            size_hint: None,.2
                            width: self.height

                            Button:
                                size_hint: None, None
                                pos_hint: {"center_x":.55, "center_y": .45}
                                size_hint: None, None
                                size: "60dp","60dp"
                                background_color: 0,0,0,0

                                on_state:
                                    imageinfotohometab3.opacity = .7 if self.state == "down" else 1

                                on_release:
                                    app.root.current = "home"
                                    imageinfotohometab3.opacity = 1

                                Image:
                                    id: imageinfotohometab3
                                    source: "images/buttons/homebutton.png"
                                    center_x: self.parent.center_x
                                    center_y: self.parent.center_y
                                    size: self.parent.size
                                    opacity: 0.5 if self.parent.disabled == True else 1


<GameMode>:
    name: "gamemode"

    GridLayout:
        cols: 1
        # size_hint: 1, 1
        size_hint: None, 1
        width: app.windowwidth
        pos_hint: {"center_x": .5, "center_y": .5}
        
        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "images/screens/GameModeScreen.png"

        FloatLayout:
            size: self.size
            pos: self.pos

            
            Label:
                markup: True
                text:
                    '\n'.join(("      [font=fonts/russoone.ttf][b][i]Choose[/i][/b][/font]","[font=fonts/russoone.ttf][i][b]a Game Mode[/b][/i][/font]"))
                font_size: "40sp"
                size_hint: 1, .2
                color: hex("#E7005E")
                pos_hint: {"center_x":.5, "top":.95}

            Button:
                pos_hint: {"center_x":.5, "top":.68}
                size_hint: None, None
                size: "175dp","75dp"
                background_color: 0,0,0,0

                on_state:
                    imagemodestoquiz.source = "images/buttons/spacequizlight.png" if self.state == "down" else "images/buttons/spacequizdark.png"
                
                on_release:
                    app.root.current = "quiz"

                Image:
                    id: imagemodestoquiz
                    source: "images/buttons/spacequizdark.png"
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: self.parent.size
                    opacity: 0.5 if self.parent.disabled == True else 1

            Button:
                pos_hint: {"center_x":.5, "top":.53}
                size_hint: None, None
                size: "175dp","75dp"
                background_color: 0,0,0,0
                
                on_state:
                    imagemodestorapidfire.source = "images/buttons/rapidfirelight.png" if self.state == "down" else "images/buttons/rapidfiredark.png"
                
                on_release:
                    app.root.current = "rapidfire"

                Image:
                    id: imagemodestorapidfire
                    source: "images/buttons/rapidfiredark.png"
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: self.parent.size
                    opacity: 0.5 if self.parent.disabled == True else 1

            Button:
                text: "Space Facts"
                pos_hint: {"center_x":.5, "top":.38}
                size_hint: None, None
                size: "175dp","75dp"
                background_color: 0,0,0,0
                
                on_state:
                    imagemodestofacts.source = "images/buttons/spacefactmodelight.png" if self.state == "down" else "images/buttons/spacefactmodedark.png"
                
                on_release:
                    app.root.current = "facts"

                Image:
                    id: imagemodestofacts
                    source: "images/buttons/spacefactmodedark.png"
                    center_x: self.parent.center_x
                    center_y: self.parent.center_y
                    size: self.parent.size
                    opacity: 0.5 if self.parent.disabled == True else 1

            FloatLayout:
                pos_hint: {"right":1, "top":.2}
                size_hint: None,.2
                width: self.height

                Button:
                    size_hint: None, None
                    pos_hint: {"center_x":.55, "center_y": .45}
                    size_hint: None, None
                    size: "60dp","60dp"
                    background_color: 0,0,0,0

                    on_press:
                        imagemodestohome.opacity=.7

                    on_release:
                        app.root.current = "home"
                        imagemodestohome.opacity=1

                    Image:
                        id: imagemodestohome
                        source: "images/buttons/homebutton.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1

<Quiz>:
    name: "quiz"

    GridLayout:
        cols: 1
        # size_hint: 1, 1
        size_hint: None, 1
        width: app.windowwidth
        pos_hint: {"center_x": .5, "center_y": .5}

        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "images/screens/Quiz_Rapid_CTF.png"
                
        GridLayout:
            cols: 1
            
            FloatLayout:
                orientation: "vertical"
                size_hint: 1,.99
                
                Label:
                    text: "Space Trivia"
                    font_size: "40dp"
                    size_hint: 1, .1
                    pos_hint: {"center_x": .5, "top": .967}
                
                Label:
                    text: "Question: " + root.question_number + "/5                               Score: " + str(root.Quiz_Score)
                    font_size: "20sp"
                    size_hint: 1,.1
                    pos_hint: {"center_x": .5, "top": .85885}
                    
                WrappedLabel:
                    id: quizquestionlabel
                    text: root.question
                    font_name: "fonts/ubuntu.ttf"
                    font_size: "20sp"
                    halign: 'left'
                    valign: 'top'
                    padding_x: 10
                    size_hint: .92, .1
                    pos_hint: {"center_x":.5, "top":.75}

                Button:
                    id: btnquizaudio
                    pos_hint: {"center_x":.9, "top":.64}
                    size_hint: None, None
                    width: "25dp"
                    height: "25dp"
                    background_color: 0,0,0,0

                    on_state:
                        imagequizspeaker.opacity = .7 if self.state == "down" else 1

                    on_release:
                        # app.talk(root.talkquestion)
                        imagequizspeaker.opacity = 1
                    
                    Image:
                        id: imagequizspeaker
                        source: "images/buttons/speakericon.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1

                ToggleButton:
                    id: btnopt1
                    pos_hint: {"center_x":.5, "top":.5785}
                    size_hint: .92, .0723
                    background_color: 0,0,0,0
                    
                    on_state:
                        imageopt1.source = "images/buttons/optionlight.png" if self.state == "down" else "images/buttons/optiondark.png"

                    on_release:
                        root.inputA(self)
                        imageopt1.source = "images/buttons/optionselect.png" if self.state == "down" else "images/buttons/optiondark.png"
                        btnquizcheck.disabled = False if self.state == "down" else True
                    
                    Image:
                        id: imageopt1
                        source: "images/buttons/optiondark.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1
                        allow_stretch: True
                        keep_ratio: False
                    
                Label:
                    text: root.opt1
                    text_size: self.size
                    size_hint: .92, .0723
                    pos_hint: {"center_x":.5, "top":.5785}
                    valign: 'middle'
                    padding_x: 10
                
                ToggleButton:
                    id: btnopt2
                    pos_hint: {"center_x":.5, "top":.4955}
                    size_hint: .92, .0723
                    background_color: 0,0,0,0

                    on_state:
                        imageopt2.source = "images/buttons/optionlight.png" if self.state == "down" else "images/buttons/optiondark.png"

                    on_release:
                        root.inputB(self)
                        imageopt2.source = "images/buttons/optionselect.png" if self.state == "down" else "images/buttons/optiondark.png"
                        btnquizcheck.disabled = False if self.state == "down" else True
                        
                    Image:
                        id: imageopt2
                        source: "images/buttons/optiondark.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1
                        allow_stretch: True
                        keep_ratio: False
                    
                Label:
                    text: root.opt2
                    text_size: self.size
                    size_hint: .92, .0723
                    pos_hint: {"center_x":.5, "top":.4955}
                    valign: 'middle'
                    padding_x: 10

                ToggleButton:
                    id: btnopt3
                    pos_hint: {"center_x":.5, "top":.4122}
                    size_hint: .92, .0723
                    background_color: 0,0,0,0

                    on_state:
                        imageopt3.source = "images/buttons/optionlight.png" if self.state == "down" else "images/buttons/optiondark.png"

                    on_release:
                        root.inputC(self)
                        imageopt3.source = "images/buttons/optionselect.png" if self.state == "down" else "images/buttons/optiondark.png"
                        btnquizcheck.disabled = False if self.state == "down" else True
                        
                    Image:
                        id: imageopt3
                        source: "images/buttons/optiondark.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1
                        allow_stretch: True
                        keep_ratio: False
                    
                Label:
                    text: root.opt3
                    text_size: self.size
                    size_hint: .92, .0723
                    pos_hint: {"center_x":.5, "top":.4122}
                    valign: 'middle'
                    padding_x: 10
                
                ToggleButton:
                    id: btnopt4
                    pos_hint: {"center_x":.5, "top":.3299}
                    size_hint: .92, .0723
                    background_color: 0,0,0,0

                    on_state:
                        imageopt4.source = "images/buttons/optionlight.png" if self.state == "down" else "images/buttons/optiondark.png"

                    on_release:
                        root.inputD(self)
                        imageopt4.source = "images/buttons/optionselect.png" if self.state == "down" else "images/buttons/optiondark.png"
                        btnquizcheck.disabled = False if self.state == "down" else True
                        
                    Image:
                        id: imageopt4
                        source: "images/buttons/optiondark.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1
                        allow_stretch: True
                        keep_ratio: False
                    
                Label:
                    text: root.opt4
                    text_size: self.size
                    size_hint: .92, .0723
                    pos_hint: {"center_x":.5, "top":.3299}
                    valign: 'middle'
                    padding_x: 10

                WrappedLabel:
                    id: quizquescheck
                    text: root.quizcheck
                    text_size: self.size
                    size_hint: .92, .1
                    padding_x: 20
                    pos_hint: {"center_x":.5, "top":.2235}

                Button:
                    id: btnquizcheck
                    pos_hint: {"center_x":.5, "top": .0835}
                    size_hint: .92, .0723
                    background_color: 0,0,0,0
                    disabled: True

                    on_state:
                        imagequizcheck.source = "images/buttons/checkanslight.png" if self.state == "down" else "images/buttons/checkansdark.png"

                    on_release:
                        root.check_quiz_ans()
                        imagequizcheck.source = "images/buttons/checkansdark.png"

                    Image:
                        id: imagequizcheck
                        source: "images/buttons/checkansdark.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1
                        allow_stretch: True
                        keep_ratio: False

            GridLayout:
                cols:2
                size_hint: 1,.16
                
                
                FloatLayout:
                    Button:
                        id: btnquiztohome
                        size_hint: None, None
                        size: "150.5dp", "45dp"
                        background_color: 0,0,0,0
                        pos_hint: {"top": .875, "center_x": .53264}
                        disabled: False

                        on_state:
                            imagequiztohome.source = "images/buttons/quitlight.png" if self.state == "down" else "images/buttons/quitdark.png"
                        
                        on_release:
                            app.root.current = "home"
                            root.exitquiz()
                            imageopt1.source = "images/buttons/optiondark.png"
                            imageopt2.source = "images/buttons/optiondark.png"
                            imageopt3.source = "images/buttons/optiondark.png"
                            imageopt4.source = "images/buttons/optiondark.png"
                            imagequiztohome.source = "images/buttons/quitdark.png"

                        Image:
                            id: imagequiztohome
                            source: "images/buttons/quitdark.png"
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size: self.parent.size
                            opacity: 0.5 if self.parent.disabled == True else 1
                
                FloatLayout:
                    Button:
                        id: btnquiznextques
                        size_hint: None, None
                        size: "150.5dp", "45dp"
                        background_color: 0,0,0,0
                        pos_hint: {"top": .875, "center_x": .46564}
                        disabled: True #disable it

                        on_state:
                            imagenextquiz.source = "images/buttons/nextqueslight.png" if self.state == "down" else "images/buttons/nextquesdark.png"
                        
                        on_release:
                            root.start_quiz_ques(self, btnquiztohome)
                            imageopt1.source = "images/buttons/optiondark.png"
                            imageopt2.source = "images/buttons/optiondark.png"
                            imageopt3.source = "images/buttons/optiondark.png"
                            imageopt4.source = "images/buttons/optiondark.png"
                            # imagenextquiz.source = "images/buttons/nextquesdark.png"
                            btnopt1.state = 'normal'
                            btnopt2.state = 'normal'
                            btnopt3.state = 'normal'
                            btnopt4.state = 'normal'
                        
                        Image:
                            id: imagenextquiz
                            source: "images/buttons/nextquesdark.png"
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size: self.parent.size
                            opacity: 0.5 if self.parent.disabled == True else 1

<RapidFire>:
    name: "rapidfire"
    
    GridLayout:
        cols: 1
        # size_hint: 1, 1
        size_hint: None, 1
        width: app.windowwidth
        pos_hint: {"center_x": .5, "center_y": .5}

        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "images/screens/Quiz_Rapid_CTF.png"
                
        GridLayout:
            cols: 1
            
            FloatLayout:
                orientation: "vertical"
                size_hint: 1,.99
                
                Label:
                    text: "Rapid Fire"
                    font_size: "40dp"
                    size_hint: 1, .1
                    pos_hint: {"center_x": .5, "top": .967}
                
                Label:
                    text: "Question: " + root.question_number + "/5                               Score: " + str(root.Quiz_Score)
                    font_size: "20sp"
                    size_hint: 1,.1
                    pos_hint: {"center_x": .5, "top": .85885}
                    
                WrappedLabel:
                    id: quizquestionlabel
                    text: root.question
                    font_name: "fonts/ubuntu.ttf"
                    font_size: "20sp"
                    halign: 'left'
                    valign: 'top'
                    padding_x: 10
                    size_hint: .92, .1
                    pos_hint: {"center_x":.5, "top":.75}

                Button:
                    id: btnquizaudio
                    pos_hint: {"center_x":.9, "top":.64}
                    size_hint: None, None
                    width: "25dp"
                    height: "25dp"
                    background_color: 0,0,0,0

                    on_state:
                        imagequizspeaker.opacity = .7 if self.state == "down" else 1

                    on_release:
                        # app.talk(root.talkquestion)
                        imagequizspeaker.opacity = 1
                    
                    Image:
                        id: imagequizspeaker
                        source: "images/buttons/speakericon.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1

                ToggleButton:
                    id: btnopt1
                    pos_hint: {"center_x":.5, "top":.5785}
                    size_hint: .92, .0723
                    background_color: 0,0,0,0
                    
                    on_state:
                        imageopt1.source = "images/buttons/optionlight.png" if self.state == "down" else "images/buttons/optiondark.png"

                    on_release:
                        root.inputA(self)
                        imageopt1.source = "images/buttons/optionselect.png" if self.state == "down" else "images/buttons/optiondark.png"
                        btnquizcheck.disabled = False if self.state == "down" else True
                    
                    Image:
                        id: imageopt1
                        source: "images/buttons/optiondark.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1
                        allow_stretch: True
                        keep_ratio: False
                    
                Label:
                    text: root.opt1
                    text_size: self.size
                    size_hint: .92, .0723
                    pos_hint: {"center_x":.5, "top":.5785}
                    valign: 'middle'
                    padding_x: 10
                
                ToggleButton:
                    id: btnopt2
                    pos_hint: {"center_x":.5, "top":.4955}
                    size_hint: .92, .0723
                    background_color: 0,0,0,0

                    on_state:
                        imageopt2.source = "images/buttons/optionlight.png" if self.state == "down" else "images/buttons/optiondark.png"

                    on_release:
                        root.inputB(self)
                        imageopt2.source = "images/buttons/optionselect.png" if self.state == "down" else "images/buttons/optiondark.png"
                        btnquizcheck.disabled = False if self.state == "down" else True
                        
                    Image:
                        id: imageopt2
                        source: "images/buttons/optiondark.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1
                        allow_stretch: True
                        keep_ratio: False
                    
                Label:
                    text: root.opt2
                    text_size: self.size
                    size_hint: .92, .0723
                    pos_hint: {"center_x":.5, "top":.4955}
                    valign: 'middle'
                    padding_x: 10

                ToggleButton:
                    id: btnopt3
                    pos_hint: {"center_x":.5, "top":.4122}
                    size_hint: .92, .0723
                    background_color: 0,0,0,0

                    on_state:
                        imageopt3.source = "images/buttons/optionlight.png" if self.state == "down" else "images/buttons/optiondark.png"

                    on_release:
                        root.inputC(self)
                        imageopt3.source = "images/buttons/optionselect.png" if self.state == "down" else "images/buttons/optiondark.png"
                        btnquizcheck.disabled = False if self.state == "down" else True
                        
                    Image:
                        id: imageopt3
                        source: "images/buttons/optiondark.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1
                        allow_stretch: True
                        keep_ratio: False
                    
                Label:
                    text: root.opt3
                    text_size: self.size
                    size_hint: .92, .0723
                    pos_hint: {"center_x":.5, "top":.4122}
                    valign: 'middle'
                    padding_x: 10
                
                ToggleButton:
                    id: btnopt4
                    pos_hint: {"center_x":.5, "top":.3299}
                    size_hint: .92, .0723
                    background_color: 0,0,0,0

                    on_state:
                        imageopt4.source = "images/buttons/optionlight.png" if self.state == "down" else "images/buttons/optiondark.png"

                    on_release:
                        root.inputD(self)
                        imageopt4.source = "images/buttons/optionselect.png" if self.state == "down" else "images/buttons/optiondark.png"
                        btnquizcheck.disabled = False if self.state == "down" else True
                        
                    Image:
                        id: imageopt4
                        source: "images/buttons/optiondark.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1
                        allow_stretch: True
                        keep_ratio: False
                    
                Label:
                    text: root.opt4
                    text_size: self.size
                    size_hint: .92, .0723
                    pos_hint: {"center_x":.5, "top":.3299}
                    valign: 'middle'
                    padding_x: 10

                WrappedLabel:
                    id: quizquescheck
                    text: root.quizcheck
                    text_size: self.size
                    size_hint: .92, .1
                    padding_x: 20
                    pos_hint: {"center_x":.5, "top":.2235}

                Button:
                    id: btnquizcheck
                    pos_hint: {"center_x":.5, "top": .0835}
                    size_hint: .92, .0723
                    background_color: 0,0,0,0
                    disabled: True

                    on_state:
                        imagequizcheck.source = "images/buttons/checkanslight.png" if self.state == "down" else "images/buttons/checkansdark.png"

                    on_release:
                        root.check_quiz_ans()
                        imagequizcheck.source = "images/buttons/checkansdark.png"

                    Image:
                        id: imagequizcheck
                        source: "images/buttons/checkansdark.png"
                        center_x: self.parent.center_x
                        center_y: self.parent.center_y
                        size: self.parent.size
                        opacity: 0.5 if self.parent.disabled == True else 1
                        allow_stretch: True
                        keep_ratio: False

            GridLayout:
                cols:2
                size_hint: 1,.16
                
                
                FloatLayout:
                    Button:
                        id: btnquiztohome
                        size_hint: None, None
                        size: "150.5dp", "45dp"
                        background_color: 0,0,0,0
                        pos_hint: {"top": .875, "center_x": .53264}
                        disabled: False

                        on_state:
                            imagequiztohome.source = "images/buttons/quitlight.png" if self.state == "down" else "images/buttons/quitdark.png"
                        
                        on_release:
                            app.root.current = "home"
                            root.exitquiz()
                            imageopt1.source = "images/buttons/optiondark.png"
                            imageopt2.source = "images/buttons/optiondark.png"
                            imageopt3.source = "images/buttons/optiondark.png"
                            imageopt4.source = "images/buttons/optiondark.png"
                            imagequiztohome.source = "images/buttons/quitdark.png"

                        Image:
                            id: imagequiztohome
                            source: "images/buttons/quitdark.png"
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size: self.parent.size
                            opacity: 0.5 if self.parent.disabled == True else 1
                
                FloatLayout:
                    Button:
                        id: btnquiznextques
                        size_hint: None, None
                        size: "150.5dp", "45dp"
                        background_color: 0,0,0,0
                        pos_hint: {"top": .875, "center_x": .46564}
                        disabled: True #disable it

                        on_state:
                            imagenextquiz.source = "images/buttons/nextqueslight.png" if self.state == "down" else "images/buttons/nextquesdark.png"
                        
                        on_release:
                            root.start_quiz_ques(self, btnquiztohome)
                            imageopt1.source = "images/buttons/optiondark.png"
                            imageopt2.source = "images/buttons/optiondark.png"
                            imageopt3.source = "images/buttons/optiondark.png"
                            imageopt4.source = "images/buttons/optiondark.png"
                            # imagenextquiz.source = "images/buttons/nextquesdark.png"
                            btnopt1.state = 'normal'
                            btnopt2.state = 'normal'
                            btnopt3.state = 'normal'
                            btnopt4.state = 'normal'
                        
                        Image:
                            id: imagenextquiz
                            source: "images/buttons/nextquesdark.png"
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size: self.parent.size
                            opacity: 0.5 if self.parent.disabled == True else 1

<QuizResult>:
    name: "quizresult"
    
    GridLayout:
        cols: 1
        # size_hint: 1, 1
        size_hint: None, 1
        width: app.windowwidth
        pos_hint: {"center_x": .5, "center_y": .5}

        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "images/screens/ResultCTF.png"
                
        GridLayout:
            cols: 1
            
            FloatLayout:
                orientation: "vertical"
                size_hint: 1,.99

                Label:
                    text:
                        '\n'.join(("Space Trivia", "   Result"))
                    font_size: "20dp"
                    size_hint: 1, .1
                    pos_hint: {"center_x": .5, "top": .977}

                Label:
                    text: "Well Played!"
                    size_hint: .1, .1
                    pos_hint: {"center_x": .5, "center_y": .5}

            GridLayout:
                cols:2
                size_hint: 1,.16
                
                FloatLayout:
                    Button:
                        id: btnquizresulttohome
                        size_hint: None, None
                        size: "150.5dp", "45dp"
                        background_color: 0,0,0,0
                        pos_hint: {"top": .875, "center_x": .53264}
                        disabled: False

                        on_state:
                            imagequizresulttohome.source = "images/buttons/homelight.png" if self.state == "down" else "images/buttons/homedark.png"
                        
                        on_release:
                            app.root.current = "home"
                            imagequizresulttohome.source = "images/buttons/homedark.png"

                        Image:
                            id: imagequizresulttohome
                            source: "images/buttons/homedark.png"
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size: self.parent.size
                            opacity: 0.5 if self.parent.disabled == True else 1
                
                FloatLayout:
                    Button:
                        id: btnquizplayagain
                        size_hint: None, None
                        size: "150.5dp", "45dp"
                        background_color: 0,0,0,0
                        pos_hint: {"top": .875, "center_x": .46564}
                        disabled: False

                        on_state:
                            imageagainquiz.source = "images/buttons/playagainlight.png" if self.state == "down" else "images/buttons/playagaindark.png"
                        
                        on_release:
                            app.root.current = "quiz"
                            imageagainquiz.source = "images/buttons/playagaindark.png"

                        Image:
                            id: imageagainquiz
                            source: "images/buttons/playagaindark.png"
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size: self.parent.size
                            opacity: 0.5 if self.parent.disabled == True else 1

<RapidResult>:
    name: "rapidresult"

    GridLayout:
        cols: 1
        # size_hint: 1, 1
        size_hint: None, 1
        width: app.windowwidth
        pos_hint: {"center_x": .5, "center_y": .5}

        canvas.before:
            Rectangle:
                pos: self.pos
                size: self.size
                source: "images/screens/ResultCTF.png"
                
        GridLayout:
            cols: 1
            
            FloatLayout:
                orientation: "vertical"
                size_hint: 1,.99
                
                Label:
                    text:
                        '\n'.join(("Rapid Fire", "   Result"))
                    font_size: "20dp"
                    size_hint: 1, .1
                    pos_hint: {"center_x": .5, "top": .977}

                Label:
                    text: "Well Played!"
                    size_hint: .1, .1
                    pos_hint: {"center_x": .5, "center_y": .5}
            
            GridLayout:
                cols:2
                size_hint: 1,.16
                
                FloatLayout:
                    Button:
                        id: btnrapidresulttohome
                        size_hint: None, None
                        size: "150.5dp", "45dp"
                        background_color: 0,0,0,0
                        pos_hint: {"top": .875, "center_x": .53264}
                        disabled: False
                        
                        on_state:
                            imagerapidresulttohome.source = "images/buttons/homelight.png" if self.state == "down" else "images/buttons/homedark.png"
                        
                        on_release:
                            app.root.current = "home"
                            imagerapidresulttohome.source = "images/buttons/homedark.png"

                        Image:
                            id: imagerapidresulttohome
                            source: "images/buttons/homedark.png"
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size: self.parent.size
                            opacity: 0.5 if self.parent.disabled == True else 1

                FloatLayout:
                    Button:
                        id: btnrapidplayagain
                        size_hint: None, None
                        size: "150.5dp", "45dp"
                        background_color: 0,0,0,0
                        pos_hint: {"top": .875, "center_x": .46564}
                        disabled: False

                        on_state:
                            imageagainrapid.source = "images/buttons/playagainlight.png" if self.state == "down" else "images/buttons/playagaindark.png"
                        
                        on_release:
                            app.root.current = "rapidfire"
                            imageagainrapid.source = "images/buttons/playagaindark.png"

                        Image:
                            id: imageagainrapid
                            source: "images/buttons/playagaindark.png"
                            center_x: self.parent.center_x
                            center_y: self.parent.center_y
                            size: self.parent.size
                            opacity: 0.5 if self.parent.disabled == True else 1