#:kivy 2.0.0
#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import CardTransition kivy.uix.screenmanager.CardTransition
#:import WipeTransition kivy.uix.screenmanager.WipeTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import SwapTransition kivy.uix.screenmanager.SwapTransition
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import FallOutTransition kivy.uix.screenmanager.FallOutTransition
#:import RiseInTransition kivy.uix.screenmanager.RiseInTransition
#:import hex kivy.utils.get_color_from_hex


WindowManager:
    transition: SlideTransition()
    Home:
    Setting:
    Info:
    GameMode:
    Quiz:
    RapidFire:
    Facts:
    SolarFacts:
    Result:
    EndScreen:

<ButImage@ButtonBehavior+AsyncImage>

<Home>:
    name: "home"
    
    canvas.before:
        # Color:
        #     rgba: (1, 1, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size
            source: "images/NewHome.jpg"

    Button:
        text: "Play"
        pos_hint: {"center_x":.5, "center_y":.6}
        size_hint: None, None
        size: "175dp","75dp"
        background_color: .52, .52, .52, 1
        
        on_release:
            app.root.current = "gamemode"
            
    
    Button:
        text: "Settings"
        pos_hint: {"center_x":.5, "center_y":.45}
        size_hint: None, None
        size: "175dp","75dp"
        background_color: .52, .52, .52, 1

        on_release:
            app.root.current = "setting"

    Button:
        text: "Info"
        pos_hint: {"center_x":.5, "center_y":.3}
        size_hint: None, None
        size: "175dp","75dp"
        background_color: .52, .52, .52, 1

        on_release:
            app.root.current = "info"
    
    Button:
        text: "Exit"
        pos_hint: {"center_x":.5, "center_y":.15}
        size_hint: None, None
        size: "175dp","75dp"
        background_color: .52, .52, .52, 1

        on_release:
            app.stop()

<Setting>:
    name: "setting"

<Info>:
    name: "info"
    ScrollView:
        BoxLayout:
            padding: 20, 160
            size_hint: 1, None
            height: self.minimum_height
            WrappedLabel:
                size: root.size
                text: root.infos

<GameMode>:
    name: "gamemode"

    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "images/NewGameMode.jpg"

    Button:
        text: "Space Quiz"
        pos_hint: {"center_x":.5, "center_y":.67}
        size_hint: None, None
        size: "150dp","75dp"
        background_color: .52, .52, .52, 1
        
        on_release:
            app.root.current = "quiz"

    Button:
        text: "Rapid Fire"
        pos_hint: {"center_x":.5, "center_y":.54}
        size_hint: None, None
        size: "150dp","75dp"
        background_color: .52, .52, .52, 1
        
        on_release:
            app.root.current = "rapidfire"

    Button:
        text: "Space Facts"
        pos_hint: {"center_x":.5, "center_y":.41}
        size_hint: None, None
        size: "150dp","75dp"
        background_color: .52, .52, .52, 1
        
        on_release:
            app.root.current = "facts"

    Button:
        text: "Planet Facts"
        pos_hint: {"center_x":.5, "center_y":.28}
        size_hint: None, None
        size: "150dp","75dp"
        background_color: .52, .52, .52, 1
        
        on_release:
            app.root.current = "solarfacts"

    Button:
        text: "Home"
        pos_hint: {"center_x":.5, "center_y":.15}
        size_hint: None, None
        size: "150dp","75dp"
        background_color: .52, .52, .52, 1
        
        on_release:
            app.root.current = "home"

<Quiz>:
    name: "quiz"
    
    canvas.before:
        Color:
            rgba: hex("#181818")
        Rectangle:
            pos: self.pos
            size: self.size
            

    GridLayout:
        cols: 1
        
        # GridLayout:
        #     cols: 1
        #     pos_hint: {'x': 0, 'y': 0}
        #     size_hint: (.8, 1)

        GridLayout:
            cols: 1
            size_hint: (.8, .25)

            WrappedLabel:
                id: questionlabel
                text: root.question
                # pos_hint: {'top':0.5,'right':0.5}
                halign: 'left'
                valign: 'top'
                padding_x: 10
                text_size: self.size
                font_size: 20
        
        GridLayout:
            cols: 2
            size_hint: (.8, .75)
            
            GridLayout:
                cols: 1
                size_hint: (.8, .75)
                Button:
                    id: btnopt1
                    text: root.opt1
                    text_size: self.size
                    size_hint: (1, .25)
                    valign: 'middle'
                    padding_x: 10
                    background_color: .52, .52, .52, 1
                    on_release:
                        root.inputA(self)
                        root.check_quiz_ans()
                        self.background_color = (0,1,0,1) if root.ans == "true" else (1,0,0,1)
                Button:
                    id: btnopt2
                    text: root.opt2
                    text_size: self.size
                    size_hint: (1, .25)
                    valign: 'middle'
                    padding_x: 10
                    background_color: .52, .52, .52, 1
                    on_release:
                        root.inputB(self)
                        root.check_quiz_ans
                        self.background_color = (0,1,0,1) if root.ans == "true" else (1,0,0,1)
                Button:
                    id: btnopt3
                    text: root.opt3
                    text_size: self.size
                    size_hint: (1, .25)
                    valign: 'middle'
                    padding_x: 10
                    background_color: .52, .52, .52, 1
                    on_release:
                        root.inputC(self)
                        root.check_quiz_ans
                        self.background_color = (0,1,0,1) if root.ans == "true" else (1,0,0,1)
                Button:
                    id: btnopt4
                    text: root.opt4
                    text_size: self.size
                    size_hint: (1, .25)
                    valign: 'middle'
                    padding_x: 10
                    background_color: .52, .52, .52, 1
                    on_release:
                        root.inputD(self)
                        root.check_quiz_ans
                        self.background_color = (0,1,0,1) if root.ans == "true" else (1,0,0,1)

            GridLayout:
                cols: 1
                pos_hint: {'x': 1, 'y': 0}
                size_hint: (.2, 1)

                Button:
                    text: root.nexttohome
                    size_hint: (1, .2)
                    
                    on_release:
                        root.start_quiz_ques()
                        
                        btnopt1.background_color = .52, .52, .52, 1
                        btnopt2.background_color = .52, .52, .52, 1
                        btnopt3.background_color = .52, .52, .52, 1
                        btnopt4.background_color = .52, .52, .52, 1
                        # app.root.current = "Home" if root.ques_no == 4

<RapidFire>:
    name: "rapidfire"

<Facts>:
    name: "facts"

<SolarFacts>:
    name: "solarfacts"

<Result>:
    name: "result"

<EndScreen>:
    name: "endscreen"